#!/usr/bin/env bash

bspc monitor -d I II III IV V VI VII VIII IX X

printf "[..] Configuring bspwm\n"
bspc config border_width	2
bspc config window_gap		12

bspc config split_ratio		0.50
bspc config borderless_monocle	true
bspc config gapless_monocle	true

bspc config remove_disabled_monitors	true
bspc config remove_unplugged_monitors	true

bspc config click_to_focus		any

bspc config pointer_follows_monitor	true

bspc config pointer_modifier		mod1
bspc config pointer_action1		move
bspc config pointer_action2		resize_corner

bspc rule -a feh floating=on manage=off

# Plasma rules
bspc rule -a plasmashell state=floating sticky=on border=off
bspc rule -a krunner state=floating layer=above sticky=on border=off

wal -i $(shuf -n1 -e ~/.dotfiles/wallpapers/*)
chmod +x ${HOME}/.cache/wal/colors.sh
. "${HOME}/.cache/wal/colors.sh"

bspc config normal_border_color "$color1"
bspc config active_border_color "$color2"
bspc config focused_border_color "$color15"
bspc config presel_feedback_color "$color1"

printf "[..] Killing existing daemons\n"
services="sxhkd polybar conky dunst compton"
for service in $services; do
	printf "  [..] Killing $service\n"
	killall $service
done

compton &
$HOME/.config/polybar/launch.sh &
sxhkd &
conky &
dunst &

